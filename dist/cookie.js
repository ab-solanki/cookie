!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("js-cookie")):"function"==typeof define&&define.amd?define(["exports","js-cookie"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).CookiePlugin={},e.Cookies)}(this,function(e,n){"use strict";var t=Object.defineProperty,o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(e,n,o)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,a=(e,n,t)=>r(e,"symbol"!=typeof n?n+"":n,t),c=(e,n,t)=>new Promise((o,i)=>{var s=e=>{try{a(t.next(e))}catch(n){i(n)}},r=e=>{try{a(t.throw(e))}catch(n){i(n)}},a=e=>e.done?o(e.value):Promise.resolve(e.value).then(s,r);a((t=t.apply(e,n)).next())});function l(e,n){const t=((e,n)=>{for(var t in n||(n={}))i.call(n,t)&&r(e,t,n[t]);if(o)for(var t of o(n))s.call(n,t)&&r(e,t,n[t]);return e})({},e);for(const o in n)n[o]&&"object"==typeof n[o]&&!Array.isArray(n[o])?t[o]=l(e[o]||{},n[o]):void 0!==n[o]&&(t[o]=n[o]);return t}const d={setCookie(e,n,t={}){let o=`${e}=${encodeURIComponent(n)}`;if(t.expires){const e=new Date;e.setTime(e.getTime()+24*t.expires*60*60*1e3),o+=`; expires=${e.toUTCString()}`}t.path&&(o+=`; path=${t.path}`),t.domain&&(o+=`; domain=${t.domain}`),t.secure&&(o+="; secure"),t.sameSite&&(o+=`; samesite=${t.sameSite}`),document.cookie=o},getCookie(e){const n=e+"=",t=document.cookie.split(";");for(let o=0;o<t.length;o++){let e=t[o];for(;" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(n))return decodeURIComponent(e.substring(n.length,e.length))}return null},removeCookie(e,n="/",t){let o=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=${n}`;t&&(o+=`; domain=${t}`),document.cookie=o}},g={setItem(e,n,t){const o={data:n,timestamp:Date.now(),expiry:t?Date.now()+t:void 0};try{localStorage.setItem(e,JSON.stringify(o))}catch(i){}},getItem(e){try{const n=localStorage.getItem(e);if(!n)return null;const t=JSON.parse(n);return t.expiry&&Date.now()>t.expiry?(localStorage.removeItem(e),null):t.data}catch(n){return null}},removeItem(e){localStorage.removeItem(e)},clear(){localStorage.clear()}};class h{constructor(e={}){a(this,"config"),a(this,"consent",null),a(this,"cookieBar",null),a(this,"modal",null),a(this,"scrollListener"),this.config=this.mergeConfig(e),this.consent=this.loadConsent(),this.init()}mergeConfig(e){return l(this.getDefaultConfig(),e)}getDefaultConfig(){return{enabled:!0,theme:"light",position:"bottom",autoShow:!0,showOnScroll:!1,scrollThreshold:100,categories:{essential:{name:"Essential",description:"These cookies are necessary for the website to function properly.",required:!0,cookies:["session","csrf","language"]},analytics:{name:"Analytics",description:"These cookies help us understand how visitors interact with our website.",required:!1,cookies:["_ga","_gid","_gat"]},marketing:{name:"Marketing",description:"These cookies are used to deliver personalized advertisements.",required:!1,cookies:["_fbp","fr"]},preferences:{name:"Preferences",description:"These cookies remember your preferences and settings.",required:!1,cookies:["theme","language","timezone"]}},ui:{primaryColor:"#007bff",secondaryColor:"#6c757d",borderRadius:"8px",fontFamily:"system-ui, sans-serif",fontSize:"14px",animation:!0,backdrop:!0},texts:{title:"Cookie Consent",description:"We use cookies to enhance your browsing experience.",acceptAll:"Accept All",rejectAll:"Reject All",customize:"Customize",save:"Save Preferences",close:"Close",moreInfo:"More Information",cookiePolicy:"Cookie Policy",privacyPolicy:"Privacy Policy"},cookieSettings:{name:"ns-cookie-consent",expiry:365,domain:"",path:"/",secure:!1,sameSite:"Lax"},debug:!1,version:"1.0.0"}}init(){return c(this,null,function*(){if(this.config.enabled)try{this.log("Initializing NS Cookie plugin..."),this.injectStyles(),this.hasConsent()?(this.log("Consent already exists, applying settings..."),this.applyConsent()):this.config.autoShow&&this.showCookieBar(),this.config.showOnScroll&&this.setupScrollListener(),this.log("NS Cookie plugin initialized successfully")}catch(e){}else this.log("NS Cookie plugin is disabled")})}log(e,...n){this.config.debug}injectStyles(){if(document.getElementById("ns-cookie-styles"))return;const e=document.createElement("style");e.id="ns-cookie-styles",e.textContent=this.getCSSStyles(),document.head.appendChild(e)}getCSSStyles(){return'\n      /* NS Cookie Plugin Styles */\n      .ns-cookie-bar {\n        position: fixed;\n        left: 0;\n        right: 0;\n        z-index: 999999;\n        background: #ffffff;\n        border-top: 1px solid #e0e0e0;\n        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);\n        font-family: var(--ns-cookie-font-family, system-ui, sans-serif);\n        font-size: var(--ns-cookie-font-size, 14px);\n        opacity: 0;\n        transform: translateY(100%);\n        transition: all 0.3s ease-in-out;\n      }\n\n      .ns-cookie-bar.ns-cookie-show {\n        opacity: 1;\n        transform: translateY(0);\n      }\n\n      .ns-cookie-bar.ns-cookie-hide {\n        opacity: 0;\n        transform: translateY(100%);\n      }\n\n      .ns-cookie-bar.ns-cookie-top {\n        top: 0;\n        bottom: auto;\n        border-top: none;\n        border-bottom: 1px solid #e0e0e0;\n        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n        transform: translateY(-100%);\n      }\n\n      .ns-cookie-bar.ns-cookie-top.ns-cookie-show {\n        transform: translateY(0);\n      }\n\n      .ns-cookie-bar.ns-cookie-top.ns-cookie-hide {\n        transform: translateY(-100%);\n      }\n\n      .ns-cookie-bar.ns-cookie-bottom {\n        bottom: 0;\n        top: auto;\n      }\n\n      .ns-cookie-bar.ns-cookie-dark {\n        background: #2c3e50;\n        color: #ffffff;\n        border-color: #34495e;\n      }\n\n      .ns-cookie-content {\n        max-width: 1200px;\n        margin: 0 auto;\n        padding: 20px;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        gap: 20px;\n      }\n\n      .ns-cookie-text {\n        flex: 1;\n        min-width: 0;\n      }\n\n      .ns-cookie-title {\n        margin: 0 0 8px 0;\n        font-size: 18px;\n        font-weight: 600;\n        color: inherit;\n      }\n\n      .ns-cookie-description {\n        margin: 0;\n        line-height: 1.5;\n        color: inherit;\n        opacity: 0.9;\n      }\n\n      .ns-cookie-actions {\n        display: flex;\n        gap: 12px;\n        flex-shrink: 0;\n      }\n\n      .ns-cookie-btn {\n        padding: 10px 20px;\n        border: none;\n        border-radius: var(--ns-cookie-border-radius, 8px);\n        font-size: 14px;\n        font-weight: 500;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        text-decoration: none;\n        display: inline-block;\n        text-align: center;\n        min-width: 100px;\n      }\n\n      .ns-cookie-btn-primary {\n        background: var(--ns-cookie-primary-color, #007bff);\n        color: #ffffff;\n      }\n\n      .ns-cookie-btn-primary:hover {\n        background: #0056b3;\n        transform: translateY(-1px);\n      }\n\n      .ns-cookie-btn-secondary {\n        background: var(--ns-cookie-secondary-color, #6c757d);\n        color: #ffffff;\n      }\n\n      .ns-cookie-btn-secondary:hover {\n        background: #545b62;\n        transform: translateY(-1px);\n      }\n\n      .ns-cookie-btn-outline {\n        background: transparent;\n        color: var(--ns-cookie-primary-color, #007bff);\n        border: 2px solid var(--ns-cookie-primary-color, #007bff);\n      }\n\n      .ns-cookie-btn-outline:hover {\n        background: var(--ns-cookie-primary-color, #007bff);\n        color: #ffffff;\n        transform: translateY(-1px);\n      }\n\n      .ns-cookie-backdrop {\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 0.5);\n        z-index: 999998;\n        opacity: 0;\n        transition: opacity 0.3s ease;\n      }\n\n      .ns-cookie-modal {\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        z-index: 999999;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        opacity: 0;\n        visibility: hidden;\n        transition: all 0.3s ease;\n      }\n\n      .ns-cookie-modal.ns-cookie-modal-show {\n        opacity: 1;\n        visibility: visible;\n      }\n\n      .ns-cookie-modal.ns-cookie-modal-hide {\n        opacity: 0;\n        visibility: hidden;\n      }\n\n      .ns-cookie-modal-backdrop {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 0.5);\n        cursor: pointer;\n      }\n\n      .ns-cookie-modal-content {\n        background: #ffffff;\n        border-radius: var(--ns-cookie-border-radius, 8px);\n        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);\n        max-width: 600px;\n        width: 90%;\n        max-height: 80vh;\n        overflow: hidden;\n        position: relative;\n        z-index: 1;\n      }\n\n      .ns-cookie-modal-header {\n        padding: 20px;\n        border-bottom: 1px solid #e0e0e0;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n      }\n\n      .ns-cookie-modal-header h2 {\n        margin: 0;\n        font-size: 24px;\n        font-weight: 600;\n        color: #333;\n      }\n\n      .ns-cookie-close {\n        background: none;\n        border: none;\n        font-size: 24px;\n        cursor: pointer;\n        color: #666;\n        padding: 0;\n        width: 30px;\n        height: 30px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 50%;\n        transition: all 0.2s ease;\n      }\n\n      .ns-cookie-close:hover {\n        background: #f0f0f0;\n        color: #333;\n      }\n\n      .ns-cookie-modal-body {\n        padding: 20px;\n        max-height: 400px;\n        overflow-y: auto;\n      }\n\n      .ns-cookie-modal-description {\n        margin: 0 0 20px 0;\n        color: #666;\n        line-height: 1.5;\n      }\n\n      .ns-cookie-categories {\n        display: flex;\n        flex-direction: column;\n        gap: 16px;\n      }\n\n      .ns-cookie-category {\n        padding: 16px;\n        border: 1px solid #e0e0e0;\n        border-radius: var(--ns-cookie-border-radius, 8px);\n        background: #f9f9f9;\n      }\n\n      .ns-cookie-category-header {\n        display: flex;\n        align-items: flex-start;\n        gap: 16px;\n      }\n\n      .ns-cookie-switch {\n        position: relative;\n        display: inline-block;\n        width: 50px;\n        height: 24px;\n        flex-shrink: 0;\n        margin-top: 2px;\n      }\n\n      .ns-cookie-switch input {\n        opacity: 0;\n        width: 0;\n        height: 0;\n      }\n\n      .ns-cookie-slider {\n        position: absolute;\n        cursor: pointer;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background-color: #ccc;\n        transition: 0.3s;\n        border-radius: 24px;\n      }\n\n      .ns-cookie-slider:before {\n        position: absolute;\n        content: "";\n        height: 18px;\n        width: 18px;\n        left: 3px;\n        bottom: 3px;\n        background-color: white;\n        transition: 0.3s;\n        border-radius: 50%;\n      }\n\n      .ns-cookie-switch input:checked + .ns-cookie-slider {\n        background-color: var(--ns-cookie-primary-color, #007bff);\n      }\n\n      .ns-cookie-switch input:checked + .ns-cookie-slider:before {\n        transform: translateX(26px);\n      }\n\n      .ns-cookie-switch input:disabled + .ns-cookie-slider {\n        background-color: #28a745;\n        cursor: not-allowed;\n      }\n\n      .ns-cookie-category-info {\n        flex: 1;\n        min-width: 0;\n      }\n\n      .ns-cookie-category-info h4 {\n        margin: 0 0 8px 0;\n        font-size: 16px;\n        font-weight: 600;\n        color: #333;\n      }\n\n      .ns-cookie-category-info p {\n        margin: 0;\n        color: #666;\n        line-height: 1.4;\n        font-size: 14px;\n      }\n\n      .ns-cookie-required {\n        background: #28a745;\n        color: white;\n        padding: 2px 8px;\n        border-radius: 4px;\n        font-size: 12px;\n        font-weight: 500;\n        margin-bottom: 8px;\n        display: inline-block;\n      }\n\n      .ns-cookie-modal-footer {\n        padding: 20px;\n        border-top: 1px solid #e0e0e0;\n        display: flex;\n        gap: 12px;\n        justify-content: flex-end;\n      }\n\n      /* Responsive Design */\n      @media (max-width: 768px) {\n        .ns-cookie-content {\n          flex-direction: column;\n          align-items: stretch;\n          text-align: center;\n        }\n\n        .ns-cookie-actions {\n          justify-content: center;\n          flex-wrap: wrap;\n        }\n\n        .ns-cookie-btn {\n          min-width: 80px;\n          padding: 8px 16px;\n        }\n\n        .ns-cookie-modal-content {\n          width: 95%;\n          margin: 20px;\n        }\n\n        .ns-cookie-category-header {\n          flex-direction: column;\n          gap: 12px;\n        }\n\n        .ns-cookie-switch {\n          align-self: flex-start;\n        }\n      }\n\n      /* Dark theme adjustments */\n      .ns-cookie-bar.ns-cookie-dark .ns-cookie-btn-outline {\n        color: #ffffff;\n        border-color: #ffffff;\n      }\n\n      .ns-cookie-bar.ns-cookie-dark .ns-cookie-btn-outline:hover {\n        background: #ffffff;\n        color: #2c3e50;\n      }\n    '}hasConsent(){return null!==this.consent}loadConsent(){const e=n.get(this.config.cookieSettings.name);if(e)try{const n=JSON.parse(e);if(this.isValidConsent(n))return n}catch(t){this.log("Failed to parse consent data:",t)}return null}isValidConsent(e){return e&&"object"==typeof e&&"number"==typeof e.timestamp&&"string"==typeof e.version&&e.categories&&"object"==typeof e.categories}showCookieBar(){try{if(this.cookieBar||document.querySelector(".ns-cookie-bar"))return void this.log("Cookie bar already exists, skipping creation");this.createCookieBar(),this.attachEventListeners(),this.config.ui.animation&&requestAnimationFrame(()=>{var e;null==(e=this.cookieBar)||e.classList.add("ns-cookie-show")})}catch(e){}}createCookieBar(){try{const e=document.createElement("div");if(e.className=`ns-cookie-bar ns-cookie-${this.config.position} ns-cookie-${this.config.theme}`,e.innerHTML=this.getCookieBarHTML(),this.config.ui.backdrop){const e=document.createElement("div");e.className="ns-cookie-backdrop",e.style.opacity="1",document.body.appendChild(e)}document.body.appendChild(e),this.cookieBar=e,this.applyCustomStyles(),this.log("Cookie bar created successfully")}catch(e){}}getCookieBarHTML(){return`\n      <div class="ns-cookie-content">\n        <div class="ns-cookie-text">\n          <h3 class="ns-cookie-title">${this.config.texts.title}</h3>\n          <p class="ns-cookie-description">${this.config.texts.description}</p>\n        </div>\n        <div class="ns-cookie-actions">\n          <button class="ns-cookie-btn ns-cookie-btn-outline" data-action="customize">\n            ${this.config.texts.customize}\n          </button>\n          <button class="ns-cookie-btn ns-cookie-btn-secondary" data-action="reject">\n            ${this.config.texts.rejectAll}\n          </button>\n          <button class="ns-cookie-btn ns-cookie-btn-primary" data-action="accept">\n            ${this.config.texts.acceptAll}\n          </button>\n        </div>\n      </div>\n    `}attachEventListeners(){if(this.cookieBar)try{this.cookieBar.addEventListener("click",this.handleCookieBarClick.bind(this)),this.log("Event listeners attached to cookie bar")}catch(e){}}handleCookieBarClick(e){try{const n=e.target.dataset.action;if(!n)return;switch(n){case"accept":this.acceptAll();break;case"reject":this.rejectAll();break;case"customize":this.showCustomizeModal()}}catch(n){}}showCustomizeModal(){try{if(this.modal||document.querySelector(".ns-cookie-modal"))return void this.log("Modal already exists, skipping creation");this.hideCookieBar(),this.createModal()}catch(e){}}createModal(){try{const e=document.createElement("div");e.className="ns-cookie-modal",e.innerHTML=this.getModalHTML(),document.body.appendChild(e),this.modal=e,this.config.ui.animation&&requestAnimationFrame(()=>{e.classList.add("ns-cookie-modal-show")}),this.attachModalEventListeners(),this.log("Modal created successfully")}catch(e){}}getModalHTML(){const e=Object.entries(this.config.categories).map(([e,n])=>{var t;return`\n        <div class="ns-cookie-category">\n          ${n.required?'<span class="ns-cookie-required">Required</span>':""}\n          <div class="ns-cookie-category-header">\n            <label class="ns-cookie-switch" for="category-${e}">\n              <input\n                type="checkbox"\n                id="category-${e}"\n                data-category="${e}"\n                ${n.required?"checked disabled":""}\n                ${(null==(t=this.consent)?void 0:t.categories[e])?"checked":""}\n              >\n              <span class="ns-cookie-slider"></span>\n            </label>\n            <div class="ns-cookie-category-info">\n              <h4>${n.name}</h4>\n              <p>${n.description}</p>\n            </div>\n          </div>\n        </div>\n      `}).join("");return`\n      <div class="ns-cookie-modal-backdrop"></div>\n      <div class="ns-cookie-modal-content">\n        <div class="ns-cookie-modal-header">\n          <h2>${this.config.texts.title}</h2>\n          <button class="ns-cookie-close" data-action="close">&times;</button>\n        </div>\n        <div class="ns-cookie-modal-body">\n          <p class="ns-cookie-modal-description">${this.config.texts.description}</p>\n          <div class="ns-cookie-categories">\n            ${e}\n          </div>\n        </div>\n        <div class="ns-cookie-modal-footer">\n          <button class="ns-cookie-btn ns-cookie-btn-outline" data-action="close">\n            ${this.config.texts.close}\n          </button>\n          <button class="ns-cookie-btn ns-cookie-btn-primary" data-action="save">\n            ${this.config.texts.save}\n          </button>\n        </div>\n      </div>\n    `}attachModalEventListeners(){if(this.modal)try{this.modal.addEventListener("click",this.handleModalClick.bind(this)),this.log("Event listeners attached to modal")}catch(e){}}handleModalClick(e){try{const n=e.target.dataset.action;if(!n)return;switch(n){case"close":this.hideModal();break;case"save":this.saveCustomPreferences()}}catch(n){}}acceptAll(){try{const e={timestamp:Date.now(),version:this.config.version,categories:{essential:!0,analytics:!0,marketing:!0,preferences:!0}};this.saveConsent(e),this.applyConsent(),this.hideCookieBar(),this.hideModal(),this.config.onAccept&&this.config.onAccept(e),this.log("All cookies accepted")}catch(e){}}rejectAll(){try{const e={timestamp:Date.now(),version:this.config.version,categories:{essential:!0,analytics:!1,marketing:!1,preferences:!1}};this.saveConsent(e),this.applyConsent(),this.hideCookieBar(),this.hideModal(),this.config.onReject&&this.config.onReject(e),this.log("Non-essential cookies rejected")}catch(e){}}saveCustomPreferences(){if(this.modal)try{const e={};this.modal.querySelectorAll('input[type="checkbox"]').forEach(n=>{const t=n,o=t.dataset.category;o&&(e[o]=t.checked)});const n={timestamp:Date.now(),version:this.config.version,categories:e};this.saveConsent(n),this.applyConsent(),this.hideModal(),this.config.onSave&&this.config.onSave(n),this.log("Custom preferences saved")}catch(e){}}saveConsent(e){this.consent=e,n.set(this.config.cookieSettings.name,JSON.stringify(e),{expires:this.config.cookieSettings.expiry,path:this.config.cookieSettings.path,domain:this.config.cookieSettings.domain,secure:this.config.cookieSettings.secure,sameSite:this.config.cookieSettings.sameSite.toLowerCase()}),this.log("Consent saved:",e)}applyConsent(){this.consent&&(this.updateAnalyticsConsent(),this.updateMarketingConsent(),this.updatePreferencesConsent(),this.log("Consent applied:",this.consent))}updateAnalyticsConsent(){var e;const n=!0===(null==(e=this.consent)?void 0:e.categories.analytics);window.gtag&&window.gtag("consent","update",{analytics_storage:n?"granted":"denied"}),window.dataLayer&&window.dataLayer.push({event:"consent_update",analytics_storage:n?"granted":"denied"})}updateMarketingConsent(){var e;const n=!0===(null==(e=this.consent)?void 0:e.categories.marketing);window.gtag&&window.gtag("consent","update",{ad_storage:n?"granted":"denied"}),window.fbq&&(n?window.fbq("consent","grant"):window.fbq("consent","revoke"))}updatePreferencesConsent(){var e;!0===(null==(e=this.consent)?void 0:e.categories.preferences)?localStorage.setItem("ns-cookie-preferences",JSON.stringify(this.consent)):localStorage.removeItem("ns-cookie-preferences")}hideCookieBar(){if(this.cookieBar)try{this.cookieBar.classList.remove("ns-cookie-show"),this.cookieBar.classList.add("ns-cookie-hide"),setTimeout(()=>{this.cookieBar&&(this.cookieBar.remove(),this.cookieBar=null)},300);const e=document.querySelector(".ns-cookie-backdrop");e&&e.remove(),this.log("Cookie bar hidden successfully")}catch(e){}}hideModal(){if(this.modal)try{this.modal.classList.remove("ns-cookie-modal-show"),this.modal.classList.add("ns-cookie-modal-hide"),setTimeout(()=>{this.modal&&(this.modal.remove(),this.modal=null)},300),this.log("Modal hidden successfully")}catch(e){}}setupScrollListener(){let e=!1;this.scrollListener=()=>{!e&&window.scrollY>this.config.scrollThreshold&&(e=!0,this.showCookieBar(),this.scrollListener&&window.removeEventListener("scroll",this.scrollListener))},window.addEventListener("scroll",this.scrollListener,{passive:!0})}applyCustomStyles(){const e=this.config.ui,n=document.documentElement;n.style.setProperty("--ns-cookie-primary-color",e.primaryColor),n.style.setProperty("--ns-cookie-secondary-color",e.secondaryColor),n.style.setProperty("--ns-cookie-border-radius",e.borderRadius),n.style.setProperty("--ns-cookie-font-family",e.fontFamily),n.style.setProperty("--ns-cookie-font-size",e.fontSize)}show(){this.showCookieBar()}hide(){this.hideCookieBar(),this.hideModal()}reset(){n.remove(this.config.cookieSettings.name),this.consent=null,this.hide()}getConsent(){return this.consent}updateConfig(e){this.config=this.mergeConfig(e),this.applyCustomStyles()}destroy(){try{this.scrollListener&&(window.removeEventListener("scroll",this.scrollListener),this.scrollListener=void 0),this.hideCookieBar(),this.hideModal();document.querySelectorAll(".ns-cookie-backdrop").forEach(e=>e.remove());document.querySelectorAll(".ns-cookie-bar").forEach(e=>e.remove());document.querySelectorAll(".ns-cookie-modal").forEach(e=>e.remove());const e=document.getElementById("ns-cookie-styles");e&&e.remove(),this.cookieBar=null,this.modal=null,this.log("Cookie plugin destroyed and cleaned up")}catch(e){}}}e.AutoBlocker=class{constructor(){a(this,"rules",[]),a(this,"isEnabled",!1),this.initializeDefaultRules()}initializeDefaultRules(){this.rules=[{id:"google-analytics",name:"Google Analytics",pattern:"google-analytics.com",type:"script",category:"analytics",enabled:!0,description:"Blocks Google Analytics tracking"},{id:"google-tag-manager",name:"Google Tag Manager",pattern:"googletagmanager.com",type:"script",category:"analytics",enabled:!0,description:"Blocks Google Tag Manager"},{id:"facebook-pixel",name:"Facebook Pixel",pattern:"connect.facebook.net",type:"script",category:"marketing",enabled:!0,description:"Blocks Facebook Pixel tracking"},{id:"hotjar",name:"Hotjar",pattern:"static.hotjar.com",type:"script",category:"analytics",enabled:!0,description:"Blocks Hotjar tracking"}]}enable(){this.isEnabled=!0,this.applyBlocking()}disable(){this.isEnabled=!1,this.removeBlocking()}applyBlocking(){const e=document.createElement;document.createElement=function(n){const t=e.call(this,n);if("script"===n.toLowerCase()){const e=t,n=Object.getOwnPropertyDescriptor(HTMLScriptElement.prototype,"src");Object.defineProperty(e,"src",{get:function(){var e;return(null==(e=null==n?void 0:n.get)?void 0:e.call(this))||""},set:function(e){var t;this.shouldBlockScript&&this.shouldBlockScript(e)||null==(t=null==n?void 0:n.set)||t.call(this,e)}})}return t}}removeBlocking(){}addRule(e){this.rules.push(e)}removeRule(e){this.rules=this.rules.filter(n=>n.id!==e)}getRules(){return[...this.rules]}isRuleEnabled(e){const n=this.rules.find(n=>n.id===e);return(null==n?void 0:n.enabled)||!1}setRuleEnabled(e,n){const t=this.rules.find(n=>n.id===e);t&&(t.enabled=n)}shouldBlockScript(e){return this.isEnabled&&this.rules.some(n=>n.enabled&&"script"===n.type&&e.includes(n.pattern))}shouldBlockIframe(e){return this.isEnabled&&this.rules.some(n=>n.enabled&&"iframe"===n.type&&e.includes(n.pattern))}shouldBlockPixel(e){return this.isEnabled&&this.rules.some(n=>n.enabled&&"pixel"===n.type&&e.includes(n.pattern))}},e.ConsentLogger=class{constructor(e={}){var n,t,o;a(this,"config"),this.config={enabled:null==(n=e.enabled)||n,storageType:null!=(t=e.storageType)?t:"localStorage",serverEndpoint:e.serverEndpoint,anonymizeData:null==(o=e.anonymizeData)||o}}logConsent(e,n){return c(this,null,function*(){if(!this.config.enabled)return;const t={id:this.generateId(),timestamp:Date.now(),action:e,consentData:n,userAgent:navigator.userAgent,ipAddress:yield this.getIPAddress(),referrer:document.referrer,pageUrl:window.location.href,sessionId:this.getSessionId(),version:"1.0.0"};this.config.anonymizeData&&(t.ipAddress=this.anonymizeIP(t.ipAddress)),yield this.storeLogEntry(t)})}generateId(){return`log_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}getIPAddress(){return c(this,null,function*(){try{const e=yield fetch("https://api.ipify.org?format=json");return(yield e.json()).ip}catch(e){return"unknown"}})}getSessionId(){let e=sessionStorage.getItem("ns-cookie-session-id");return e||(e=this.generateId(),sessionStorage.setItem("ns-cookie-session-id",e)),e}anonymizeIP(e){if("unknown"===e)return e;const n=e.split(".");return 4===n.length?`${n[0]}.${n[1]}.${n[2]}.xxx`:e}storeLogEntry(e){return c(this,null,function*(){switch(this.config.storageType){case"localStorage":this.storeInLocalStorage(e);break;case"sessionStorage":this.storeInSessionStorage(e);break;case"indexedDB":yield this.storeInIndexedDB(e);break;case"server":yield this.storeOnServer(e)}})}storeInLocalStorage(e){try{const n=this.getLogsFromStorage("localStorage");n.push(e),localStorage.setItem("ns-cookie-logs",JSON.stringify(n))}catch(n){}}storeInSessionStorage(e){try{const n=this.getLogsFromStorage("sessionStorage");n.push(e),sessionStorage.setItem("ns-cookie-logs",JSON.stringify(n))}catch(n){}}storeInIndexedDB(e){return c(this,null,function*(){return new Promise((n,t)=>{const o=indexedDB.open("NSCookieLogs",1);o.onerror=()=>t(o.error),o.onsuccess=()=>{const i=o.result.transaction(["logs"],"readwrite").objectStore("logs").add(e);i.onsuccess=()=>n(),i.onerror=()=>t(i.error)},o.onupgradeneeded=()=>{const e=o.result;if(!e.objectStoreNames.contains("logs")){e.createObjectStore("logs",{keyPath:"id"}).createIndex("timestamp","timestamp")}}})})}storeOnServer(e){return c(this,null,function*(){if(this.config.serverEndpoint)try{yield fetch(this.config.serverEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(n){}})}getLogsFromStorage(e){try{const n=("localStorage"===e?localStorage:sessionStorage).getItem("ns-cookie-logs");return n?JSON.parse(n):[]}catch(n){return[]}}getConsentLogs(){switch(this.config.storageType){case"localStorage":return this.getLogsFromStorage("localStorage");case"sessionStorage":return this.getLogsFromStorage("sessionStorage");default:return[]}}generateAuditReport(e,n){return c(this,null,function*(){const t=this.getConsentLogs().filter(t=>!(e&&t.timestamp<e)&&!(n&&t.timestamp>n)),o={accept:0,reject:0,customize:0,save:0,withdraw:0},i={};return t.forEach(e=>{o[e.action]++;const n=this.getCountryFromIP(e.ipAddress);i[n]=(i[n]||0)+1}),{totalConsents:t.length,consentBreakdown:o,geographicDistribution:i,timeRange:{start:e||Math.min(...t.map(e=>e.timestamp)),end:n||Math.max(...t.map(e=>e.timestamp))},complianceStatus:this.determineComplianceStatus(o),entries:t}})}getCountryFromIP(e){return e.includes("192.168")||e.includes("127.0.0")?"Local":"Unknown"}determineComplianceStatus(e){const n=Object.values(e).reduce((e,n)=>e+n,0);if(0===n)return"non-compliant";const t=e.reject/n;return t>.1?"compliant":t>.05?"partial":"non-compliant"}clearOldLogs(e=365){const n=Date.now()-24*e*60*60*1e3;switch(this.config.storageType){case"localStorage":this.clearOldLogsFromStorage("localStorage",n);break;case"sessionStorage":this.clearOldLogsFromStorage("sessionStorage",n)}}clearOldLogsFromStorage(e,n){try{const t=this.getLogsFromStorage(e).filter(e=>e.timestamp>n);("localStorage"===e?localStorage:sessionStorage).setItem("ns-cookie-logs",JSON.stringify(t))}catch(t){}}exportLogs(){const e=this.getConsentLogs();return JSON.stringify(e,null,2)}},e.CookiePlugin=h,e.GeoTargeting=class{constructor(e={}){var n;a(this,"config"),this.config={enabled:null==(n=e.enabled)||n,fallbackRegion:this.getDefaultRegion(),regions:this.initializeRegions()}}getDefaultRegion(){return{code:"US",name:"United States",laws:["CCPA"],requiresConsent:!1,consentType:"opt-out",cookieCategories:["essential","analytics","marketing","preferences"],bannerStyle:"minimal",language:"en"}}initializeRegions(){const e=new Map;return e.set("EU",{code:"EU",name:"European Union",laws:["GDPR"],requiresConsent:!0,consentType:"opt-in",cookieCategories:["essential","analytics","marketing","preferences"],bannerStyle:"comprehensive",language:"en"}),e.set("GB",{code:"GB",name:"United Kingdom",laws:["UK GDPR","PECR"],requiresConsent:!0,consentType:"opt-in",cookieCategories:["essential","analytics","marketing","preferences"],bannerStyle:"detailed",language:"en"}),e.set("CA",{code:"CA",name:"California",laws:["CCPA"],requiresConsent:!1,consentType:"opt-out",cookieCategories:["essential","analytics","marketing","preferences"],bannerStyle:"minimal",language:"en"}),e}getCurrentLocation(){return c(this,null,function*(){try{const e=yield fetch("https://ipapi.co/json/"),n=yield e.json();return{country:n.country_name,countryCode:n.country_code,region:n.region,city:n.city,timezone:n.timezone,ip:n.ip}}catch(e){return null}})}getComplianceRegion(){return c(this,null,function*(){if(!this.config.enabled)return this.config.fallbackRegion;const e=yield this.getCurrentLocation();if(!e)return this.config.fallbackRegion;if(["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE"].includes(e.countryCode))return this.config.regions.get("EU")||this.config.fallbackRegion;return this.config.regions.get(e.countryCode)||this.config.fallbackRegion})}getRegionConfig(){return c(this,null,function*(){return this.getComplianceRegion()})}getRegionTexts(){return c(this,null,function*(){const e={EU:{title:"Cookie-Einstellungen",description:"Wir verwenden Cookies, um Ihre Erfahrung zu verbessern.",acceptAll:"Alle akzeptieren",rejectAll:"Alle ablehnen",customize:"Anpassen"},GB:{title:"Cookie Preferences",description:"We use cookies to enhance your browsing experience.",acceptAll:"Accept All",rejectAll:"Reject All",customize:"Customize"},CA:{title:"Cookie Settings",description:"We use cookies to improve your experience.",acceptAll:"Accept All",rejectAll:"Opt Out",customize:"Manage Preferences"}};return e[(yield this.getComplianceRegion()).code]||e.CA})}isConsentRequired(){return c(this,null,function*(){return(yield this.getComplianceRegion()).requiresConsent})}getConsentType(){return c(this,null,function*(){return"opt-in"===(yield this.getComplianceRegion()).consentType?"opt-in":"opt-out"})}getBannerStyle(){return c(this,null,function*(){return(yield this.getComplianceRegion()).bannerStyle})}getApplicableLaws(){return c(this,null,function*(){return(yield this.getComplianceRegion()).laws})}},e.WebsiteScanner=class{constructor(){a(this,"cookies",[]),a(this,"trackers",[]),this.scanCookies(),this.scanTrackers()}scanCookies(){const e=document.cookie;e&&e.split(";").forEach(e=>{const[n,t]=e.trim().split("=");n&&t&&this.cookies.push({name:decodeURIComponent(n),domain:window.location.hostname,path:"/",value:decodeURIComponent(t),httpOnly:!1,secure:"https:"===window.location.protocol,sameSite:"Lax",category:this.categorizeCookie(n),purpose:this.getCookiePurpose(n),source:"document.cookie"})})}scanTrackers(){window.gtag&&this.trackers.push({name:"Google Analytics",type:"script",url:"https://www.google-analytics.com/analytics.js",domain:"google-analytics.com",category:"analytics",description:"Google Analytics tracking script",blocked:!1}),window.dataLayer&&this.trackers.push({name:"Google Tag Manager",type:"script",url:"https://www.googletagmanager.com/gtm.js",domain:"googletagmanager.com",category:"analytics",description:"Google Tag Manager tracking script",blocked:!1}),window.fbq&&this.trackers.push({name:"Facebook Pixel",type:"script",url:"https://connect.facebook.net/en_US/fbevents.js",domain:"connect.facebook.net",category:"marketing",description:"Facebook Pixel tracking script",blocked:!1}),document.querySelectorAll("script[src]").forEach(e=>{const n=e.getAttribute("src");if(n){const e=this.identifyTracker(n);e&&this.trackers.push(e)}})}categorizeCookie(e){return["_ga","_gid","_gat","_gcl_au","_gcl_dc"].some(n=>e.includes(n))?"analytics":["_fbp","fr","_gcl_aw","_gcl_dc"].some(n=>e.includes(n))?"marketing":["theme","language","timezone","currency"].some(n=>e.includes(n))?"preferences":["session","csrf","auth","cart"].some(n=>e.includes(n))?"essential":"unknown"}getCookiePurpose(e){return{_ga:"Google Analytics - distinguishes users",_gid:"Google Analytics - distinguishes users",_gat:"Google Analytics - throttles request rate",_fbp:"Facebook Pixel - tracks visitors",fr:"Facebook Pixel - tracks visitors",session:"Essential - maintains user session",csrf:"Essential - prevents cross-site request forgery",theme:"Preferences - stores user theme preference",language:"Preferences - stores user language preference"}[e]||"Unknown purpose"}identifyTracker(e){const n=[{pattern:/google-analytics\.com|googletagmanager\.com/,name:"Google Analytics",category:"analytics"},{pattern:/facebook\.net|connect\.facebook\.net/,name:"Facebook Pixel",category:"marketing"},{pattern:/hotjar\.com|static\.hotjar\.com/,name:"Hotjar",category:"analytics"},{pattern:/mixpanel\.com|cdn\.mxpnl\.com/,name:"Mixpanel",category:"analytics"}];for(const o of n)if(o.pattern.test(e))try{const n=new URL(e);return{name:o.name,type:"script",url:e,domain:n.hostname,category:o.category,description:`${o.name} tracking script`,blocked:!1}}catch(t){}return null}scanWebsite(){return c(this,null,function*(){const e=Date.now();this.cookies=[],this.trackers=[],this.scanCookies(),this.scanTrackers();const n=Date.now();return{cookies:this.cookies,trackers:this.trackers,scanTimestamp:n,scanDuration:n-e,totalCookies:this.cookies.length,totalTrackers:this.trackers.length}})}getCookiesByCategory(e){return this.cookies.filter(n=>n.category===e)}getTrackersByCategory(e){return this.trackers.filter(n=>n.category===e)}getAllCookies(){return[...this.cookies]}getAllTrackers(){return[...this.trackers]}},e.addEventListenerWithCleanup=function(e,n,t,o){return e.addEventListener(n,t,o),()=>{e.removeEventListener(n,t,o)}},e.cookieStorage=d,e.createElement=function(e,n={},t){const o=document.createElement(e);return Object.entries(n).forEach(([e,n])=>{o.setAttribute(e,n)}),t&&("string"==typeof t?o.innerHTML=t:Array.isArray(t)&&t.forEach(e=>{e instanceof HTMLElement&&o.appendChild(e)})),o},e.deepMerge=l,e.default=h,e.formatDate=function(e,n="short"){const t="number"==typeof e?new Date(e):e;switch(n){case"short":return t.toLocaleDateString();case"long":return t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});case"iso":return t.toISOString();default:return t.toString()}},e.generateId=function(e="id"){return`${e}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},e.isBrowser=function(){return"undefined"!=typeof window&&"undefined"!=typeof document},e.isEmpty=function(e){return null==e||("string"==typeof e?""===e.trim():Array.isArray(e)?0===e.length:"object"==typeof e&&0===Object.keys(e).length)},e.isValidEmail=function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},e.isValidUrl=function(e){try{return new URL(e),!0}catch(n){return!1}},e.sanitizeHTML=function(e){const n=document.createElement("div");return n.textContent=e,n.innerHTML},e.sleep=function(e){return new Promise(n=>setTimeout(n,e))},e.storage=g,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});