!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("js-cookie")):"function"==typeof define&&define.amd?define(["exports","js-cookie"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).CookiePlugin={},e.Cookies)}(this,function(e,t){"use strict";var o=Object.defineProperty,n=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(e,t,n)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,a=(e,t,o)=>r(e,"symbol"!=typeof t?t+"":t,o),c=(e,t,o)=>new Promise((n,s)=>{var i=e=>{try{a(o.next(e))}catch(t){s(t)}},r=e=>{try{a(o.throw(e))}catch(t){s(t)}},a=e=>e.done?n(e.value):Promise.resolve(e.value).then(i,r);a((o=o.apply(e,t)).next())});function l(e,t){const o=((e,t)=>{for(var o in t||(t={}))s.call(t,o)&&r(e,o,t[o]);if(n)for(var o of n(t))i.call(t,o)&&r(e,o,t[o]);return e})({},e);for(const n in t)t[n]&&"object"==typeof t[n]&&!Array.isArray(t[n])?o[n]=l(e[n]||{},t[n]):void 0!==t[n]&&(o[n]=t[n]);return o}const g={setCookie(e,t,o={}){let n=`${e}=${encodeURIComponent(t)}`;if(o.expires){const e=new Date;e.setTime(e.getTime()+24*o.expires*60*60*1e3),n+=`; expires=${e.toUTCString()}`}o.path&&(n+=`; path=${o.path}`),o.domain&&(n+=`; domain=${o.domain}`),o.secure&&(n+="; secure"),o.sameSite&&(n+=`; samesite=${o.sameSite}`),document.cookie=n},getCookie(e){const t=e+"=",o=document.cookie.split(";");for(let n=0;n<o.length;n++){let e=o[n];for(;" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(t))return decodeURIComponent(e.substring(t.length,e.length))}return null},removeCookie(e,t="/",o){let n=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=${t}`;o&&(n+=`; domain=${o}`),document.cookie=n}},d={setItem(e,t,o){const n={data:t,timestamp:Date.now(),expiry:o?Date.now()+o:void 0};try{localStorage.setItem(e,JSON.stringify(n))}catch(s){}},getItem(e){try{const t=localStorage.getItem(e);if(!t)return null;const o=JSON.parse(t);return o.expiry&&Date.now()>o.expiry?(localStorage.removeItem(e),null):o.data}catch(t){return null}},removeItem(e){localStorage.removeItem(e)},clear(){localStorage.clear()}};class u{constructor(e={}){a(this,"config"),a(this,"consent",null),a(this,"cookieBar",null),a(this,"modal",null),a(this,"scrollListener"),this.config=this.mergeConfig(e),this.consent=this.loadConsent(),this.init()}mergeConfig(e){return l(this.getDefaultConfig(),e)}getDefaultConfig(){return{enabled:!0,theme:"light",position:"bottom",autoShow:!0,showOnScroll:!1,scrollThreshold:100,categories:{essential:{name:"Essential",description:"These cookies are necessary for the website to function properly.",required:!0,cookies:["session","csrf","language"]},analytics:{name:"Analytics",description:"These cookies help us understand how visitors interact with our website.",required:!1,cookies:["_ga","_gid","_gat"]},marketing:{name:"Marketing",description:"These cookies are used to deliver personalized advertisements.",required:!1,cookies:["_fbp","fr"]},preferences:{name:"Preferences",description:"These cookies remember your preferences and settings.",required:!1,cookies:["theme","language","timezone"]}},ui:{primaryColor:"#007bff",secondaryColor:"#6c757d",borderRadius:"8px",fontFamily:"system-ui, sans-serif",fontSize:"14px",animation:!0,backdrop:!0},texts:{title:"Cookie Consent",description:"We use cookies to enhance your browsing experience.",acceptAll:"Accept All",rejectAll:"Reject All",customize:"Customize",save:"Save Preferences",close:"Close",moreInfo:"More Information",cookiePolicy:"Cookie Policy",privacyPolicy:"Privacy Policy"},cookieSettings:{name:"ns-cookie-consent",expiry:365,domain:"",path:"/",secure:!1,sameSite:"Lax"},debug:!1,version:"1.0.0"}}init(){return c(this,null,function*(){this.config.enabled?(this.log("Initializing NS Cookie plugin..."),this.hasConsent()?(this.log("Consent already exists, applying settings..."),this.applyConsent()):this.config.autoShow&&this.showCookieBar(),this.config.showOnScroll&&this.setupScrollListener(),this.log("NS Cookie plugin initialized successfully")):this.log("NS Cookie plugin is disabled")})}log(e,...t){this.config.debug}hasConsent(){return null!==this.consent}loadConsent(){const e=t.get(this.config.cookieSettings.name);if(e)try{const t=JSON.parse(e);if(this.isValidConsent(t))return t}catch(o){this.log("Failed to parse consent data:",o)}return null}isValidConsent(e){return e&&"object"==typeof e&&"number"==typeof e.timestamp&&"string"==typeof e.version&&e.categories&&"object"==typeof e.categories}showCookieBar(){this.cookieBar||(this.createCookieBar(),this.attachEventListeners(),this.config.ui.animation&&requestAnimationFrame(()=>{var e;null==(e=this.cookieBar)||e.classList.add("ns-cookie-show")}))}createCookieBar(){const e=document.createElement("div");if(e.className=`ns-cookie-bar ns-cookie-${this.config.position} ns-cookie-${this.config.theme}`,e.innerHTML=this.getCookieBarHTML(),this.config.ui.backdrop){const e=document.createElement("div");e.className="ns-cookie-backdrop",document.body.appendChild(e)}document.body.appendChild(e),this.cookieBar=e,this.applyCustomStyles()}getCookieBarHTML(){return`\n      <div class="ns-cookie-content">\n        <div class="ns-cookie-text">\n          <h3 class="ns-cookie-title">${this.config.texts.title}</h3>\n          <p class="ns-cookie-description">${this.config.texts.description}</p>\n        </div>\n        <div class="ns-cookie-actions">\n          <button class="ns-cookie-btn ns-cookie-btn-outline" data-action="customize">\n            ${this.config.texts.customize}\n          </button>\n          <button class="ns-cookie-btn ns-cookie-btn-secondary" data-action="reject">\n            ${this.config.texts.rejectAll}\n          </button>\n          <button class="ns-cookie-btn ns-cookie-btn-primary" data-action="accept">\n            ${this.config.texts.acceptAll}\n          </button>\n        </div>\n      </div>\n    `}attachEventListeners(){this.cookieBar&&this.cookieBar.addEventListener("click",e=>{switch(e.target.dataset.action){case"accept":this.acceptAll();break;case"reject":this.rejectAll();break;case"customize":this.showCustomizeModal()}})}showCustomizeModal(){this.modal||(this.hideCookieBar(),this.createModal())}createModal(){const e=document.createElement("div");e.className="ns-cookie-modal",e.innerHTML=this.getModalHTML(),document.body.appendChild(e),this.modal=e,this.config.ui.animation&&requestAnimationFrame(()=>{e.classList.add("ns-cookie-modal-show")}),this.attachModalEventListeners()}getModalHTML(){const e=Object.entries(this.config.categories).map(([e,t])=>{var o;return`\n        <div class="ns-cookie-category">\n          ${t.required?'<span class="ns-cookie-required">Required</span>':""}\n          <div class="ns-cookie-category-header">\n            <label class="ns-cookie-switch" for="category-${e}">\n              <input\n                type="checkbox"\n                id="category-${e}"\n                data-category="${e}"\n                ${t.required?"checked disabled":""}\n                ${(null==(o=this.consent)?void 0:o.categories[e])?"checked":""}\n              >\n              <span class="ns-cookie-slider"></span>\n            </label>\n            <div class="ns-cookie-category-info">\n              <h4>${t.name}</h4>\n              <p>${t.description}</p>\n            </div>\n          </div>\n        </div>\n      `}).join("");return`\n      <div class="ns-cookie-modal-backdrop"></div>\n      <div class="ns-cookie-modal-content">\n        <div class="ns-cookie-modal-header">\n          <h2>${this.config.texts.title}</h2>\n          <button class="ns-cookie-close" data-action="close">&times;</button>\n        </div>\n        <div class="ns-cookie-modal-body">\n          <p class="ns-cookie-modal-description">${this.config.texts.description}</p>\n          <div class="ns-cookie-categories">\n            ${e}\n          </div>\n        </div>\n        <div class="ns-cookie-modal-footer">\n          <button class="ns-cookie-btn ns-cookie-btn-outline" data-action="close">\n            ${this.config.texts.close}\n          </button>\n          <button class="ns-cookie-btn ns-cookie-btn-primary" data-action="save">\n            ${this.config.texts.save}\n          </button>\n        </div>\n      </div>\n    `}attachModalEventListeners(){this.modal&&this.modal.addEventListener("click",e=>{switch(e.target.dataset.action){case"close":this.hideModal();break;case"save":this.saveCustomPreferences()}})}acceptAll(){const e={timestamp:Date.now(),version:this.config.version,categories:{essential:!0,analytics:!0,marketing:!0,preferences:!0}};this.saveConsent(e),this.applyConsent(),this.hideCookieBar(),this.hideModal(),this.config.onAccept&&this.config.onAccept(e)}rejectAll(){const e={timestamp:Date.now(),version:this.config.version,categories:{essential:!0,analytics:!1,marketing:!1,preferences:!1}};this.saveConsent(e),this.applyConsent(),this.hideCookieBar(),this.hideModal(),this.config.onReject&&this.config.onReject(e)}saveCustomPreferences(){if(!this.modal)return;const e={};this.modal.querySelectorAll('input[type="checkbox"]').forEach(t=>{const o=t,n=o.dataset.category;n&&(e[n]=o.checked)});const t={timestamp:Date.now(),version:this.config.version,categories:e};this.saveConsent(t),this.applyConsent(),this.hideModal(),this.config.onSave&&this.config.onSave(t)}saveConsent(e){this.consent=e,t.set(this.config.cookieSettings.name,JSON.stringify(e),{expires:this.config.cookieSettings.expiry,path:this.config.cookieSettings.path,domain:this.config.cookieSettings.domain,secure:this.config.cookieSettings.secure,sameSite:this.config.cookieSettings.sameSite.toLowerCase()}),this.log("Consent saved:",e)}applyConsent(){this.consent&&(this.updateAnalyticsConsent(),this.updateMarketingConsent(),this.updatePreferencesConsent(),this.log("Consent applied:",this.consent))}updateAnalyticsConsent(){var e;const t=!0===(null==(e=this.consent)?void 0:e.categories.analytics);window.gtag&&window.gtag("consent","update",{analytics_storage:t?"granted":"denied"}),window.dataLayer&&window.dataLayer.push({event:"consent_update",analytics_storage:t?"granted":"denied"})}updateMarketingConsent(){var e;const t=!0===(null==(e=this.consent)?void 0:e.categories.marketing);window.gtag&&window.gtag("consent","update",{ad_storage:t?"granted":"denied"}),window.fbq&&(t?window.fbq("consent","grant"):window.fbq("consent","revoke"))}updatePreferencesConsent(){var e;!0===(null==(e=this.consent)?void 0:e.categories.preferences)?localStorage.setItem("ns-cookie-preferences",JSON.stringify(this.consent)):localStorage.removeItem("ns-cookie-preferences")}hideCookieBar(){this.cookieBar&&(this.cookieBar.classList.remove("ns-cookie-show"),this.cookieBar.classList.add("ns-cookie-hide"),setTimeout(()=>{var e;null==(e=this.cookieBar)||e.remove(),this.cookieBar=null},300))}hideModal(){this.modal&&(this.modal.classList.remove("ns-cookie-modal-show"),this.modal.classList.add("ns-cookie-modal-hide"),setTimeout(()=>{var e;null==(e=this.modal)||e.remove(),this.modal=null},300))}setupScrollListener(){let e=!1;this.scrollListener=()=>{!e&&window.scrollY>this.config.scrollThreshold&&(e=!0,this.showCookieBar(),this.scrollListener&&window.removeEventListener("scroll",this.scrollListener))},window.addEventListener("scroll",this.scrollListener,{passive:!0})}applyCustomStyles(){const e=this.config.ui,t=document.documentElement;t.style.setProperty("--ns-cookie-primary-color",e.primaryColor),t.style.setProperty("--ns-cookie-secondary-color",e.secondaryColor),t.style.setProperty("--ns-cookie-border-radius",e.borderRadius),t.style.setProperty("--ns-cookie-font-family",e.fontFamily),t.style.setProperty("--ns-cookie-font-size",e.fontSize)}show(){this.showCookieBar()}hide(){this.hideCookieBar(),this.hideModal()}reset(){t.remove(this.config.cookieSettings.name),this.consent=null,this.hide()}getConsent(){return this.consent}updateConfig(e){this.config=this.mergeConfig(e),this.applyCustomStyles()}destroy(){this.scrollListener&&window.removeEventListener("scroll",this.scrollListener),this.hideCookieBar(),this.hideModal();const e=document.querySelector(".ns-cookie-backdrop");null==e||e.remove(),this.log("Cookie plugin destroyed")}}e.AutoBlocker=class{constructor(){a(this,"rules",[]),a(this,"isEnabled",!1),this.initializeDefaultRules()}initializeDefaultRules(){this.rules=[{id:"google-analytics",name:"Google Analytics",pattern:"google-analytics.com",type:"script",category:"analytics",enabled:!0,description:"Blocks Google Analytics tracking"},{id:"google-tag-manager",name:"Google Tag Manager",pattern:"googletagmanager.com",type:"script",category:"analytics",enabled:!0,description:"Blocks Google Tag Manager"},{id:"facebook-pixel",name:"Facebook Pixel",pattern:"connect.facebook.net",type:"script",category:"marketing",enabled:!0,description:"Blocks Facebook Pixel tracking"},{id:"hotjar",name:"Hotjar",pattern:"static.hotjar.com",type:"script",category:"analytics",enabled:!0,description:"Blocks Hotjar tracking"}]}enable(){this.isEnabled=!0,this.applyBlocking()}disable(){this.isEnabled=!1,this.removeBlocking()}applyBlocking(){const e=document.createElement;document.createElement=function(t){const o=e.call(this,t);if("script"===t.toLowerCase()){const e=o,t=Object.getOwnPropertyDescriptor(HTMLScriptElement.prototype,"src");Object.defineProperty(e,"src",{get:function(){var e;return(null==(e=null==t?void 0:t.get)?void 0:e.call(this))||""},set:function(e){var o;this.shouldBlockScript&&this.shouldBlockScript(e)||null==(o=null==t?void 0:t.set)||o.call(this,e)}})}return o}}removeBlocking(){}addRule(e){this.rules.push(e)}removeRule(e){this.rules=this.rules.filter(t=>t.id!==e)}getRules(){return[...this.rules]}isRuleEnabled(e){const t=this.rules.find(t=>t.id===e);return(null==t?void 0:t.enabled)||!1}setRuleEnabled(e,t){const o=this.rules.find(t=>t.id===e);o&&(o.enabled=t)}shouldBlockScript(e){return this.isEnabled&&this.rules.some(t=>t.enabled&&"script"===t.type&&e.includes(t.pattern))}shouldBlockIframe(e){return this.isEnabled&&this.rules.some(t=>t.enabled&&"iframe"===t.type&&e.includes(t.pattern))}shouldBlockPixel(e){return this.isEnabled&&this.rules.some(t=>t.enabled&&"pixel"===t.type&&e.includes(t.pattern))}},e.ConsentLogger=class{constructor(e={}){var t,o,n;a(this,"config"),this.config={enabled:null==(t=e.enabled)||t,storageType:null!=(o=e.storageType)?o:"localStorage",serverEndpoint:e.serverEndpoint,anonymizeData:null==(n=e.anonymizeData)||n}}logConsent(e,t){return c(this,null,function*(){if(!this.config.enabled)return;const o={id:this.generateId(),timestamp:Date.now(),action:e,consentData:t,userAgent:navigator.userAgent,ipAddress:yield this.getIPAddress(),referrer:document.referrer,pageUrl:window.location.href,sessionId:this.getSessionId(),version:"1.0.0"};this.config.anonymizeData&&(o.ipAddress=this.anonymizeIP(o.ipAddress)),yield this.storeLogEntry(o)})}generateId(){return`log_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}getIPAddress(){return c(this,null,function*(){try{const e=yield fetch("https://api.ipify.org?format=json");return(yield e.json()).ip}catch(e){return"unknown"}})}getSessionId(){let e=sessionStorage.getItem("ns-cookie-session-id");return e||(e=this.generateId(),sessionStorage.setItem("ns-cookie-session-id",e)),e}anonymizeIP(e){if("unknown"===e)return e;const t=e.split(".");return 4===t.length?`${t[0]}.${t[1]}.${t[2]}.xxx`:e}storeLogEntry(e){return c(this,null,function*(){switch(this.config.storageType){case"localStorage":this.storeInLocalStorage(e);break;case"sessionStorage":this.storeInSessionStorage(e);break;case"indexedDB":yield this.storeInIndexedDB(e);break;case"server":yield this.storeOnServer(e)}})}storeInLocalStorage(e){try{const t=this.getLogsFromStorage("localStorage");t.push(e),localStorage.setItem("ns-cookie-logs",JSON.stringify(t))}catch(t){}}storeInSessionStorage(e){try{const t=this.getLogsFromStorage("sessionStorage");t.push(e),sessionStorage.setItem("ns-cookie-logs",JSON.stringify(t))}catch(t){}}storeInIndexedDB(e){return c(this,null,function*(){return new Promise((t,o)=>{const n=indexedDB.open("NSCookieLogs",1);n.onerror=()=>o(n.error),n.onsuccess=()=>{const s=n.result.transaction(["logs"],"readwrite").objectStore("logs").add(e);s.onsuccess=()=>t(),s.onerror=()=>o(s.error)},n.onupgradeneeded=()=>{const e=n.result;if(!e.objectStoreNames.contains("logs")){e.createObjectStore("logs",{keyPath:"id"}).createIndex("timestamp","timestamp")}}})})}storeOnServer(e){return c(this,null,function*(){if(this.config.serverEndpoint)try{yield fetch(this.config.serverEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(t){}})}getLogsFromStorage(e){try{const t=("localStorage"===e?localStorage:sessionStorage).getItem("ns-cookie-logs");return t?JSON.parse(t):[]}catch(t){return[]}}getConsentLogs(){switch(this.config.storageType){case"localStorage":return this.getLogsFromStorage("localStorage");case"sessionStorage":return this.getLogsFromStorage("sessionStorage");default:return[]}}generateAuditReport(e,t){return c(this,null,function*(){const o=this.getConsentLogs().filter(o=>!(e&&o.timestamp<e)&&!(t&&o.timestamp>t)),n={accept:0,reject:0,customize:0,save:0,withdraw:0},s={};return o.forEach(e=>{n[e.action]++;const t=this.getCountryFromIP(e.ipAddress);s[t]=(s[t]||0)+1}),{totalConsents:o.length,consentBreakdown:n,geographicDistribution:s,timeRange:{start:e||Math.min(...o.map(e=>e.timestamp)),end:t||Math.max(...o.map(e=>e.timestamp))},complianceStatus:this.determineComplianceStatus(n),entries:o}})}getCountryFromIP(e){return e.includes("192.168")||e.includes("127.0.0")?"Local":"Unknown"}determineComplianceStatus(e){const t=Object.values(e).reduce((e,t)=>e+t,0);if(0===t)return"non-compliant";const o=e.reject/t;return o>.1?"compliant":o>.05?"partial":"non-compliant"}clearOldLogs(e=365){const t=Date.now()-24*e*60*60*1e3;switch(this.config.storageType){case"localStorage":this.clearOldLogsFromStorage("localStorage",t);break;case"sessionStorage":this.clearOldLogsFromStorage("sessionStorage",t)}}clearOldLogsFromStorage(e,t){try{const o=this.getLogsFromStorage(e).filter(e=>e.timestamp>t);("localStorage"===e?localStorage:sessionStorage).setItem("ns-cookie-logs",JSON.stringify(o))}catch(o){}}exportLogs(){const e=this.getConsentLogs();return JSON.stringify(e,null,2)}},e.CookiePlugin=u,e.GeoTargeting=class{constructor(e={}){var t;a(this,"config"),this.config={enabled:null==(t=e.enabled)||t,fallbackRegion:this.getDefaultRegion(),regions:this.initializeRegions()}}getDefaultRegion(){return{code:"US",name:"United States",laws:["CCPA"],requiresConsent:!1,consentType:"opt-out",cookieCategories:["essential","analytics","marketing","preferences"],bannerStyle:"minimal",language:"en"}}initializeRegions(){const e=new Map;return e.set("EU",{code:"EU",name:"European Union",laws:["GDPR"],requiresConsent:!0,consentType:"opt-in",cookieCategories:["essential","analytics","marketing","preferences"],bannerStyle:"comprehensive",language:"en"}),e.set("GB",{code:"GB",name:"United Kingdom",laws:["UK GDPR","PECR"],requiresConsent:!0,consentType:"opt-in",cookieCategories:["essential","analytics","marketing","preferences"],bannerStyle:"detailed",language:"en"}),e.set("CA",{code:"CA",name:"California",laws:["CCPA"],requiresConsent:!1,consentType:"opt-out",cookieCategories:["essential","analytics","marketing","preferences"],bannerStyle:"minimal",language:"en"}),e}getCurrentLocation(){return c(this,null,function*(){try{const e=yield fetch("https://ipapi.co/json/"),t=yield e.json();return{country:t.country_name,countryCode:t.country_code,region:t.region,city:t.city,timezone:t.timezone,ip:t.ip}}catch(e){return null}})}getComplianceRegion(){return c(this,null,function*(){if(!this.config.enabled)return this.config.fallbackRegion;const e=yield this.getCurrentLocation();if(!e)return this.config.fallbackRegion;if(["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE"].includes(e.countryCode))return this.config.regions.get("EU")||this.config.fallbackRegion;return this.config.regions.get(e.countryCode)||this.config.fallbackRegion})}getRegionConfig(){return c(this,null,function*(){return this.getComplianceRegion()})}getRegionTexts(){return c(this,null,function*(){const e={EU:{title:"Cookie-Einstellungen",description:"Wir verwenden Cookies, um Ihre Erfahrung zu verbessern.",acceptAll:"Alle akzeptieren",rejectAll:"Alle ablehnen",customize:"Anpassen"},GB:{title:"Cookie Preferences",description:"We use cookies to enhance your browsing experience.",acceptAll:"Accept All",rejectAll:"Reject All",customize:"Customize"},CA:{title:"Cookie Settings",description:"We use cookies to improve your experience.",acceptAll:"Accept All",rejectAll:"Opt Out",customize:"Manage Preferences"}};return e[(yield this.getComplianceRegion()).code]||e.CA})}isConsentRequired(){return c(this,null,function*(){return(yield this.getComplianceRegion()).requiresConsent})}getConsentType(){return c(this,null,function*(){return"opt-in"===(yield this.getComplianceRegion()).consentType?"opt-in":"opt-out"})}getBannerStyle(){return c(this,null,function*(){return(yield this.getComplianceRegion()).bannerStyle})}getApplicableLaws(){return c(this,null,function*(){return(yield this.getComplianceRegion()).laws})}},e.WebsiteScanner=class{constructor(){a(this,"cookies",[]),a(this,"trackers",[]),this.scanCookies(),this.scanTrackers()}scanCookies(){const e=document.cookie;e&&e.split(";").forEach(e=>{const[t,o]=e.trim().split("=");t&&o&&this.cookies.push({name:decodeURIComponent(t),domain:window.location.hostname,path:"/",value:decodeURIComponent(o),httpOnly:!1,secure:"https:"===window.location.protocol,sameSite:"Lax",category:this.categorizeCookie(t),purpose:this.getCookiePurpose(t),source:"document.cookie"})})}scanTrackers(){window.gtag&&this.trackers.push({name:"Google Analytics",type:"script",url:"https://www.google-analytics.com/analytics.js",domain:"google-analytics.com",category:"analytics",description:"Google Analytics tracking script",blocked:!1}),window.dataLayer&&this.trackers.push({name:"Google Tag Manager",type:"script",url:"https://www.googletagmanager.com/gtm.js",domain:"googletagmanager.com",category:"analytics",description:"Google Tag Manager tracking script",blocked:!1}),window.fbq&&this.trackers.push({name:"Facebook Pixel",type:"script",url:"https://connect.facebook.net/en_US/fbevents.js",domain:"connect.facebook.net",category:"marketing",description:"Facebook Pixel tracking script",blocked:!1}),document.querySelectorAll("script[src]").forEach(e=>{const t=e.getAttribute("src");if(t){const e=this.identifyTracker(t);e&&this.trackers.push(e)}})}categorizeCookie(e){return["_ga","_gid","_gat","_gcl_au","_gcl_dc"].some(t=>e.includes(t))?"analytics":["_fbp","fr","_gcl_aw","_gcl_dc"].some(t=>e.includes(t))?"marketing":["theme","language","timezone","currency"].some(t=>e.includes(t))?"preferences":["session","csrf","auth","cart"].some(t=>e.includes(t))?"essential":"unknown"}getCookiePurpose(e){return{_ga:"Google Analytics - distinguishes users",_gid:"Google Analytics - distinguishes users",_gat:"Google Analytics - throttles request rate",_fbp:"Facebook Pixel - tracks visitors",fr:"Facebook Pixel - tracks visitors",session:"Essential - maintains user session",csrf:"Essential - prevents cross-site request forgery",theme:"Preferences - stores user theme preference",language:"Preferences - stores user language preference"}[e]||"Unknown purpose"}identifyTracker(e){const t=[{pattern:/google-analytics\.com|googletagmanager\.com/,name:"Google Analytics",category:"analytics"},{pattern:/facebook\.net|connect\.facebook\.net/,name:"Facebook Pixel",category:"marketing"},{pattern:/hotjar\.com|static\.hotjar\.com/,name:"Hotjar",category:"analytics"},{pattern:/mixpanel\.com|cdn\.mxpnl\.com/,name:"Mixpanel",category:"analytics"}];for(const n of t)if(n.pattern.test(e))try{const t=new URL(e);return{name:n.name,type:"script",url:e,domain:t.hostname,category:n.category,description:`${n.name} tracking script`,blocked:!1}}catch(o){}return null}scanWebsite(){return c(this,null,function*(){const e=Date.now();this.cookies=[],this.trackers=[],this.scanCookies(),this.scanTrackers();const t=Date.now();return{cookies:this.cookies,trackers:this.trackers,scanTimestamp:t,scanDuration:t-e,totalCookies:this.cookies.length,totalTrackers:this.trackers.length}})}getCookiesByCategory(e){return this.cookies.filter(t=>t.category===e)}getTrackersByCategory(e){return this.trackers.filter(t=>t.category===e)}getAllCookies(){return[...this.cookies]}getAllTrackers(){return[...this.trackers]}},e.addEventListenerWithCleanup=function(e,t,o,n){return e.addEventListener(t,o,n),()=>{e.removeEventListener(t,o,n)}},e.cookieStorage=g,e.createElement=function(e,t={},o){const n=document.createElement(e);return Object.entries(t).forEach(([e,t])=>{n.setAttribute(e,t)}),o&&("string"==typeof o?n.innerHTML=o:Array.isArray(o)&&o.forEach(e=>{e instanceof HTMLElement&&n.appendChild(e)})),n},e.deepMerge=l,e.default=u,e.formatDate=function(e,t="short"){const o="number"==typeof e?new Date(e):e;switch(t){case"short":return o.toLocaleDateString();case"long":return o.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});case"iso":return o.toISOString();default:return o.toString()}},e.generateId=function(e="id"){return`${e}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},e.isBrowser=function(){return"undefined"!=typeof window&&"undefined"!=typeof document},e.isEmpty=function(e){return null==e||("string"==typeof e?""===e.trim():Array.isArray(e)?0===e.length:"object"==typeof e&&0===Object.keys(e).length)},e.isValidEmail=function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},e.isValidUrl=function(e){try{return new URL(e),!0}catch(t){return!1}},e.sanitizeHTML=function(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML},e.sleep=function(e){return new Promise(t=>setTimeout(t,e))},e.storage=d,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});